<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TeeRadar WA â€” Find a tee time across WA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="/assets/icon-192.png" />

  <style>
    :root {
      --teal: #00796b;
      --teal-dark: #005e55;
      --bg: #f4f7fb;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --border: #e2e8f0;
      --accent: #0ea5e9;
      --pill: #ecfeff;
    }
    *{box-sizing:border-box;}
    html,body{
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#e0f2f1,#f9fafb);
      color:var(--text);
    }
    a{text-decoration:none;color:inherit;}
    button{font-family:inherit;}

    header{
      background:var(--teal);
      color:#fff;
      padding:10px 4vw;
      position:sticky;
      top:0;
      z-index:20;
      box-shadow:0 2px 6px rgba(0,0,0,0.12);
    }
    .nav-wrap{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand-logo{
      width:26px;
      height:26px;
      border-radius:999px;
      background:#ecfdf5;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#065f46;
      font-size:15px;
      font-weight:800;
      box-shadow:0 0 0 3px rgba(16,185,129,0.25);
    }
    .brand-text{
      font-weight:700;
      letter-spacing:.04em;
      font-size:15px;
    }
    nav{
      display:flex;
      gap:16px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
      font-size:13px;
    }
    nav a{
      color:#e0f2f1;
      opacity:.88;
      padding:4px 6px;
      border-radius:999px;
    }
    nav a:hover{
      background:rgba(255,255,255,0.16);
      opacity:1;
    }
    .nav-pill{
      background:rgba(15,118,110,0.18);
      border:1px solid rgba(45,212,191,0.6);
      padding:4px 12px;
      border-radius:999px;
      font-weight:600;
    }
    .nav-btn{
      background:#ffffff;
      color:var(--teal-dark);
      border:none;
      padding:5px 14px;
      border-radius:999px;
      font-size:12px;
      font-weight:600;
      cursor:pointer;
    }

    main{
      max-width:1100px;
      margin:28px auto 40px;
      padding:0 4vw 50px;
    }

    .hero{
      display:grid;
      grid-template-columns:1.1fr 1fr;
      gap:24px;
      align-items:center;
    }
    @media(max-width:880px){
      .hero{
        grid-template-columns:1fr;
      }
    }

    .hero-kicker-pill{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:3px 9px;
      border-radius:999px;
      background:#ecfeff;
      border:1px solid #bae6fd;
      font-weight:600;
      font-size:11px;
      color:#0369a1;
    }

    .hero-title{
      font-size:clamp(28px,4vw,36px);
      font-weight:800;
      letter-spacing:-0.02em;
      margin:0 0 10px;
    }
    .hero-sub{
      font-size:14px;
      color:var(--muted);
      max-width:480px;
      margin-bottom:18px;
    }

    .btn-primary{
      background:var(--teal);
      color:#fff;
      border:none;
      border-radius:999px;
      padding:10px 20px;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 14px 28px rgba(15,118,110,0.28);
    }
    .btn-outline{
      background:#ecfeff;
      color:#0369a1;
      border:none;
      border-radius:999px;
      padding:9px 16px;
      font-size:13px;
      font-weight:600;
      cursor:pointer;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:5px 10px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid rgba(148,163,184,0.45);
      font-size:11px;
      color:var(--muted);
      margin-right:8px;
      margin-bottom:8px;
    }

    /* Account modal */
    #accountModal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,0.3);
      z-index:999;
      padding:20px;
    }
    #accountBox{
      width:100%;
      max-width:360px;
      background:white;
      border-radius:16px;
      padding:20px;
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
    }
    #accountBox h2{
      margin-top:0;
      font-size:20px;
      font-weight:700;
    }
    .input{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid #ccc;
      margin-bottom:12px;
      font-size:14px;
    }
    .suggest-box{
      background:white;
      border:1px solid #ddd;
      border-radius:8px;
      max-height:160px;
      overflow-y:auto;
      margin-top:-8px;
      margin-bottom:12px;
      display:none;
    }
    .suggest-item{
      padding:8px 10px;
      cursor:pointer;
    }
    .suggest-item:hover{
      background:#f1f5f9;
    }
  </style>
</head>

<body>

<header>
  <div class="nav-wrap">
    <div class="brand">
      <div class="brand-logo">T</div>
      <div class="brand-text">TeeRadar WA</div>
    </div>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/book.html">Bookings</a>
      <a href="/faq.html">FAQ</a>
      <a href="/about.html">About</a>
      <a href="/analytics.html" class="nav-pill" id="navAnalytics" style="display:none;">Analytics</a>
      <button class="nav-btn" id="myAccountBtn">My Account</button>
    </nav>
  </div>
</header>

<main>
  <div class="hero">
    <div>
      <span class="hero-kicker-pill">WA public courses</span>

      <h1 class="hero-title">Find a tee time across WA, in one place.</h1>

      <p class="hero-sub">
        Search public golf courses across Western Australia by date, time window, 9/18
        holes and players. Tap through to the courseâ€™s official booking page.
      </p>

      <button class="btn-primary" onclick="window.location.href='/book.html'">
        Find a tee time
      </button>
      <button class="btn-outline" onclick="window.location.href='/faq.html'">
        How TeeRadar works
      </button>

      <div style="margin-top:18px;">
        <span class="chip">â›³ 20+ WA public courses</span>
        <span class="chip">ðŸ•’ Filters that match golf</span>
        <span class="chip">ðŸ”— Course-first booking links</span>
      </div>
    </div>

    <aside class="hero-card">
      <img src="/assets/hero_golf_bg.jpg" style="width:100%; border-radius:16px;" />
    </aside>
  </div>
</main>

<footer style="max-width:1100px;margin:20px auto;padding:0 4vw;color:#64748b;font-size:12px;">
  Â© 2025 TeeRadar WA â€” <a href="/terms.html">Terms</a> â€¢ <a href="/privacy.html">Privacy</a>
</footer>

<!-- ACCOUNT MODAL -->
<div id="accountModal">
  <div id="accountBox">
    <h2>My Account</h2>

    <input id="accEmail" class="input" placeholder="Your email" />

    <input id="accHome" class="input" placeholder="Home course" autocomplete="off" />
    <div id="accSuggest" class="suggest-box"></div>

    <button class="btn-primary" style="width:100%;" onclick="saveAccount()">
      Save
    </button>
  </div>
</div>

<script>
  const ADMIN_EMAIL = "declan7pin@gmail.com";

  function isAdmin() {
    return localStorage.getItem("teeradar_user_email") === ADMIN_EMAIL;
  }

  function renderNavState() {
    document.getElementById("navAnalytics").style.display = isAdmin() ? "inline-flex" : "none";
  }

  function getBrowserId() {
    let id = localStorage.getItem("teeradar_browser_id");
    if (!id) {
      id = "browser_" + Math.random().toString(36).slice(2) + Date.now().toString(36);
      localStorage.setItem("teeradar_browser_id", id);
    }
    return id;
  }

  function trackEvent(type, payload) {
    try {
      fetch("/api/analytics/event", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          type,
          payload: payload || {},
          at: new Date().toISOString(),
          userId: getBrowserId()
        })
      }).catch(()=>{});
    } catch(err){}
  }

  trackEvent("home_view");

  const modal = document.getElementById("accountModal");
  document.getElementById("myAccountBtn").onclick = () => {
    modal.style.display = "flex";
    loadAccount();
  };
  modal.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

  function loadAccount() {
    document.getElementById("accEmail").value =
      localStorage.getItem("teeradar_user_email") || "";

    document.getElementById("accHome").value =
      localStorage.getItem("teeradar_home_course") || "";
  }

  function saveAccount() {
    localStorage.setItem("teeradar_user_email",
      document.getElementById("accEmail").value.trim().toLowerCase());

    localStorage.setItem("teeradar_home_course",
      document.getElementById("accHome").value.trim());

    modal.style.display = "none";
    renderNavState();
  }

  renderNavState();

  const WA_COURSES = [];

  fetch("/api/courses")
    .then(r=>r.json())
    .then(list => WA_COURSES.push(...list.map(c=>c.name)));

  const inp = document.getElementById("accHome");
  const box = document.getElementById("accSuggest");

  inp.addEventListener("input", () => {
    const q = inp.value.toLowerCase();
    box.innerHTML = "";
    if (!q) { box.style.display="none"; return; }

    const matches = WA_COURSES.filter(c => c.toLowerCase().includes(q)).slice(0,8);

    if (matches.length === 0) { box.style.display="none"; return; }

    matches.forEach(name => {
      const div = document.createElement("div");
      div.className = "suggest-item";
      div.textContent = name;
      div.onclick = () => {
        inp.value = name;
        box.style.display = "none";
      };
      box.appendChild(div);
    });

    box.style.display = "block";
  });
</script>

</body>
</html>